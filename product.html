<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Product</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    padding: 20px;
}
.card {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
}
img {
    width: 100%;
    border-radius: 8px;
}
.buy-btn {
    margin-top: 15px;
    padding: 12px;
    width: 100%;
    border: none;
    background: #6366f1;
    color: white;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
}
</style>
</head>
<body>

<div class="card">
    <h2 id="name"></h2>
    <p id="seller"></p>
    <img id="image">
    <p id="desc"></p>
    <h3 id="price"></h3>

    <hr>

<h3>Reviews</h3>

<div id="reviewsList"></div>

<div id="reviewForm" style="margin-top:15px;">
    <p><strong>Your Review</strong></p>

    <button id="likeBtn">üëç Like</button>
    <button id="dislikeBtn">üëé Dislike</button>

    <br><br>

    <textarea id="reviewComment" placeholder="Write a comment..."
      style="width:100%; padding:8px;"></textarea>

    <br><br>

    <button id="submitReview">Submit Review</button>
</div>


    <!-- ÿ≤ÿ± PayPal -->
    <div id="paypal-button-container"></div>
</div>

  <script src="https://www.paypal.com/sdk/js?client-id=Ady-fs_MNNG5Ue22tNNapD9abvFULboMBDy5vAbpDYt8jCVNkqeyS1hssK58OTIWLWQt5xHxZlcZ_hSB&currency=USD&intent=capture"></script>
<script>
const params = new URLSearchParams(window.location.search);
const productId = params.get('id');

if (!productId) {
    alert('Product not found');
}

// ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨
fetch('https://backend-creovea.onrender.com/products')
.then(res => res.json())
.then(products => {
    const product = products.find(p => p.id === productId);
    if (!product) return alert('Product not found');

    document.getElementById('name').textContent = product.name;
    document.getElementById('seller').textContent = 'Seller: ' + product.seller;
    document.getElementById('desc').textContent = product.description;
    document.getElementById('price').textContent = '$' + product.price;
    document.getElementById('image').src = product.previewImage;

    // PayPal
    paypal.Buttons({
        createOrder: (data, actions) => {
            return actions.order.create({
                purchase_units: [{
                    amount: { value: product.price }
                }]
            });
        },
        onApprove: async (data) => {
            const res = await fetch('https://backend-creovea.onrender.com/record-payment', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    productId: product.id,
                    orderId: data.orderID
                })
            });
            const result = await res.json();
            if (result.success) {
                window.location.href = result.downloadUrl;
            } else {
                alert('Payment failed');
            }
        }
    }).render('#paypal-button-container');
});

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
import {
  getAuth,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
import {
  getFirestore,
  doc,
  setDoc,
  getDocs,
  query,
  where,
  collection,
  serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCh2Pf1c1Gb7fQCQy64WmNYvWBKffwiuOs",
  authDomain: "creoveo-7da32.firebaseapp.com",
  projectId: "creoveo-7da32",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

let currentUser = null;
let selectedLike = null;

onAuthStateChanged(auth, user => {
  currentUser = user;
});


    <script type="module">
import {
  doc,
  setDoc,
  getDocs,
  query,
  where,
  collection,
  serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

const likeBtn = document.getElementById('likeBtn');
const dislikeBtn = document.getElementById('dislikeBtn');
const submitBtn = document.getElementById('submitReview');

likeBtn.onclick = () => selectedLike = true;
dislikeBtn.onclick = () => selectedLike = false;

// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™
async function loadReviews() {
  const q = query(
    collection(db, "reviews"),
    where("productId", "==", productId)
  );

  const snap = await getDocs(q);
  const list = document.getElementById('reviewsList');
  list.innerHTML = '';

  snap.forEach(doc => {
    const r = doc.data();
    list.innerHTML += `
      <p>
        ${r.like ? 'üëç' : 'üëé'}
        <strong>${r.userEmail}</strong><br>
        ${r.comment}
      </p>
      <hr>
    `;
  });
}

submitBtn.onclick = async () => {
  if (!currentUser) {
    alert('Login required');
    return;
  }

  if (selectedLike === null) {
    alert('Choose like or dislike');
    return;
  }

  const comment = document.getElementById('reviewComment').value.trim();

  const reviewId = `${productId}_${currentUser.uid}`;

  await setDoc(doc(db, "reviews", reviewId), {
    productId,
    userId: currentUser.uid,
    userEmail: currentUser.email,
    like: selectedLike,
    comment,
    createdAt: serverTimestamp()
  });

  alert('Review submitted!');
  loadReviews();
};

loadReviews();



    
</script>
</body>
</html>
